<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light" />

    <title>AuraNet</title>
    <meta
      name="description"
      content="Activity logger + aura blending + paper sketch map."
    />

    <link rel="icon" href="./favicon.svg" type="image/svg+xml" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=IBM+Plex+Sans:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="./styles.css" />

    <script
      defer
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script defer src="./app.js"></script>
  </head>
  <body>
    <div class="bg" aria-hidden="true"></div>

    <header class="shell">
      <div class="topbar">
        <div class="brand">
          <div class="mark" aria-hidden="true">
            <span class="mark__glyph">A</span>
          </div>
          <div class="brand__text">
            <div class="brand__name">AuraNet</div>
          </div>
        </div>
        <div class="hud">
          <div class="hud__clock" id="clock" aria-label="Local time"></div>
          <label class="lang" aria-label="Language">
            <span class="lang__label" data-i18n="ui_language">Language</span>
            <select class="lang__select" id="langSelect">
              <option value="en">English</option>
              <option value="zh-Hant">繁體中文</option>
              <option value="ja">日本語</option>
            </select>
          </label>
          <div
            class="pill pill--ok"
            id="storagePill"
            title="Saved locally in your browser"
          >
            LOCAL SAVE: OK
          </div>
        </div>
      </div>
    </header>

    <main class="shell">
      <div class="grid">
        <section class="card card--timer" aria-labelledby="activityTitle">
          <div class="card__head">
            <h2 class="h1" id="activityTitle" data-i18n="activity_title">
              Activity Logger
            </h2>
            <div class="pill pill--muted" id="auraPill">Aura</div>
          </div>

          <div class="activity">
            <div class="activity__time" id="activityTime">00:00:00</div>
            <div
              class="activity__hint"
              id="activityHint"
              data-i18n="activity_hint_idle"
            >
              Log what you’re doing. Your aura blends over time.
            </div>
          </div>

          <form class="activityForm" id="activityForm" autocomplete="off">
            <div class="activityForm__row">
              <label class="field">
                <span class="field__label" data-i18n="activity_label">
                  Activity
                </span>
                <input
                  class="input"
                  id="activityText"
                  name="text"
                  placeholder="Work, commute, gym, coffee…"
                  data-i18n-placeholder="activity_placeholder"
                  minlength="1"
                  maxlength="60"
                  required
                />
                <div class="activityAssist" aria-label="Activity helpers">
                  <div class="activityColorPreview" id="activityColorPreview" aria-live="polite"></div>
                  <div class="activitySuggest" id="activitySuggest" role="listbox" hidden></div>
                </div>
              </label>
            </div>

            <label class="toggle">
              <input type="checkbox" id="activityShowAura" />
              <span data-i18n="activity_show_aura_toggle">
                Show my aura on map while active
              </span>
            </label>

            <label class="toggle">
              <input type="checkbox" id="idleShowAura" />
              <span data-i18n="idle_show_aura_toggle">
                Show my aura on map while idle
              </span>
            </label>

            <div class="visBlock" aria-label="Aura visibility controls">
              <div class="visBlock__label" data-i18n="visibility_label">
                Visibility
              </div>
              <div class="seg visBlock__seg" id="visibilitySeg" role="radiogroup" aria-label="Aura visibility">
                <button class="seg__btn" type="button" data-vis="everyone" aria-selected="true">
                  <span data-i18n="visibility_everyone">Everyone</span>
                </button>
                <button class="seg__btn" type="button" data-vis="area" aria-selected="false">
                  <span data-i18n="visibility_area">Specific area</span>
                </button>
                <button class="seg__btn" type="button" data-vis="connected" aria-selected="false">
                  <span data-i18n="visibility_connected">Approved aura</span>
                </button>
              </div>

              <div class="visDetail" id="visibilityDetail">
                <div class="visArea" id="visArea" hidden>
                  <label class="field" for="areaRadius">
                    <span class="field__label" data-i18n="visibility_area_radius_label">
                      Visible area
                    </span>
                    <input
                      class="range"
                      type="range"
                      id="areaRadius"
                      min="10"
                      max="500"
                      step="10"
                      value="100"
                    />
                    <div class="rangeMeta" aria-live="polite">
                      <span class="rangeMeta__value" id="areaRadiusValue">100m</span>
                      <span class="rangeMeta__min">10m</span>
                      <span class="rangeMeta__max">500m</span>
                    </div>
                  </label>
                  <div class="visArea__note" id="visAreaNote"></div>
                </div>

                <div class="visApproved" id="visApproved" hidden>
                  <div class="visRoom" id="visRoom">
                    <label class="field">
                      <span class="field__label" data-i18n="room_label">
                        Room
                      </span>
                      <input
                        class="input"
                        id="visRoomCode"
                        placeholder="Room code"
                        data-i18n-placeholder="room_placeholder"
                        minlength="1"
                        maxlength="36"
                      />
                    </label>
                    <div class="visRoom__actions">
                      <button class="btn btn--ghost" type="button" id="visRoomJoin">
                        <span data-i18n="room_join">Join</span>
                      </button>
                      <button class="btn btn--ghost" type="button" id="visRoomLeave" hidden>
                        <span data-i18n="room_leave">Leave</span>
                      </button>
                      <span class="badge" id="visRoomState">ROOM: OFF</span>
                    </div>
                  </div>

                  <div class="visApproved__row">
                    <label class="field">
                      <span class="field__label" data-i18n="approved_label">
                        Approved contacts
                      </span>
                      <input
                        class="input"
                        id="approvedInput"
                        placeholder="@handle"
                        data-i18n-placeholder="approved_placeholder"
                        minlength="1"
                        maxlength="32"
                      />
                    </label>
                    <button class="btn btn--ghost" type="button" id="approvedAdd">
                      <span data-i18n="approved_add">Add</span>
                    </button>
                  </div>
                  <ul class="approvedList" id="approvedList" aria-label="Approved contacts"></ul>
                </div>
              </div>
            </div>

            <div class="activityForm__actions">
              <button class="btn btn--primary" type="button" id="activityStart">
                <span data-i18n="activity_start">Start</span>
              </button>
              <button class="btn btn--ghost" type="button" id="activityStop" disabled>
                <span data-i18n="activity_stop_log">Stop & log</span>
              </button>
            </div>
          </form>

          <div class="auraRow" aria-label="Long-term aura color">
            <div class="auraSwatch" id="auraSwatch" aria-hidden="true"></div>
            <div class="auraMeta">
              <div class="auraMeta__title" data-i18n="aura_long_term_title">
                Long-term aura
              </div>
              <div class="auraMeta__value" id="auraValue">—</div>
            </div>
          </div>

          <div class="auraViz" aria-label="Aura composition breakdown">
            <div class="auraChart" aria-hidden="true">
              <svg
                class="auraChart__svg"
                id="auraChart"
                viewBox="0 0 120 120"
                width="140"
                height="140"
              ></svg>
              <div class="auraChart__center">
                <div class="auraChart__label" data-i18n="aura_chart_label">
                  Aura
                </div>
                <div class="auraChart__value" id="auraHex">—</div>
              </div>
            </div>
            <ul
              class="auraLegend"
              id="auraLegend"
              aria-label="Aura components"
            ></ul>
          </div>

          <ul class="activityList" id="activityList" aria-label="Recent activities"></ul>

          <div class="taskPanel" aria-labelledby="taskTitle">
            <div class="taskPanel__head">
              <h2 class="h1" id="taskTitle" data-i18n="tasks_title">Tasks</h2>
              <div class="pill pill--muted" id="taskFeePill">FEE: 10%</div>
            </div>

            <form class="taskForm" id="taskForm" autocomplete="off">
              <div class="taskForm__row">
                <label class="field">
                  <span class="field__label" data-i18n="task_label">Task</span>
                  <input
                    class="input"
                    id="taskText"
                    name="task"
                    placeholder="Pick up coffee, deliver package…"
                    data-i18n-placeholder="task_placeholder"
                    minlength="2"
                    maxlength="72"
                    required
                  />
                </label>
                <label class="field">
                  <span class="field__label" data-i18n="task_reward_label">Reward (USD)</span>
                  <input
                    class="input"
                    id="taskReward"
                    name="reward"
                    type="number"
                    inputmode="decimal"
                    min="1"
                    max="9999"
                    step="1"
                    value="20"
                    required
                  />
                </label>
              </div>

              <div class="taskForm__row taskForm__row--ranges">
                <label class="field" for="taskTimeLimit">
                  <span class="field__label" data-i18n="task_time_limit_label">
                    Time limit
                  </span>
                  <input
                    class="range"
                    type="range"
                    id="taskTimeLimit"
                    min="15"
                    max="240"
                    step="15"
                    value="60"
                  />
                  <div class="rangeMeta" aria-live="polite">
                    <span class="rangeMeta__value" id="taskTimeLimitValue">60m</span>
                    <span class="rangeMeta__min">15m</span>
                    <span class="rangeMeta__max">240m</span>
                  </div>
                </label>

                <label class="field" for="taskDistanceLimit">
                  <span class="field__label" data-i18n="task_distance_limit_label">
                    Distance limit
                  </span>
                  <input
                    class="range"
                    type="range"
                    id="taskDistanceLimit"
                    min="50"
                    max="5000"
                    step="50"
                    value="800"
                  />
                  <div class="rangeMeta" aria-live="polite">
                    <span class="rangeMeta__value" id="taskDistanceLimitValue">800m</span>
                    <span class="rangeMeta__min">50m</span>
                    <span class="rangeMeta__max">5000m</span>
                  </div>
                </label>
              </div>

              <div class="taskForm__actions">
                <button class="btn btn--primary" type="submit" id="taskPost">
                  <span data-i18n="task_post">Post task</span>
                </button>
              </div>
            </form>

            <ul class="taskList" id="taskList" aria-label="Tasks"></ul>
          </div>

          <div class="toast" id="toast" role="status" aria-live="polite"></div>
        </section>

        <section class="card card--map" aria-labelledby="mapTitle">
          <div class="card__head">
            <h2 class="h1" id="mapTitle" data-i18n="map_title">
              Paper Sketch Map
            </h2>
            <div class="stats" id="mapStatus" data-i18n="map_loading">
              Loading map…
            </div>
          </div>

          <div class="mapWrap" aria-label="Map canvas with paper sketch effect">
            <div
              id="paperMap"
              class="mapCanvas"
              role="application"
              aria-label="Interactive map"
            >
              <div class="mapPaper" aria-hidden="true"></div>
              <div class="mapVignette" aria-hidden="true"></div>
            </div>
          </div>

          <div class="mapBar">
            <div class="mapActions">
              <button class="btn btn--primary" type="button" id="mapLocate">
                <span data-i18n="map_locate">My location</span>
              </button>
              <button class="btn btn--ghost" type="button" id="mapReset">
                <span data-i18n="map_reset">Reset view</span>
              </button>
            </div>
            <div class="mapMeta">
              <span class="badge" id="mapGps">GPS: OFF</span>
              <span class="badge" id="mapVis">VIS: EVERYONE</span>
              <span class="badge badge--ok" id="mapAuraCount">AURAS: 0</span>
            </div>
          </div>
        </section>
      </div>
    </main>

    <div class="modal" id="roomModal" hidden>
      <div class="modal__backdrop" data-room-close="1" aria-hidden="true"></div>
      <div
        class="modal__panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="roomTitle"
      >
        <div class="modal__head">
          <div class="modal__title" id="roomTitle" data-i18n="room_title">
            Task room
          </div>
          <button class="btn btn--ghost modal__close" type="button" id="roomClose">
            <span data-i18n="room_close">Close</span>
          </button>
        </div>

        <div class="roomMeta" id="roomMeta" aria-live="polite"></div>

        <div class="roomBody" id="roomBody" aria-label="Messages"></div>

        <form class="roomForm" id="roomForm" autocomplete="off">
          <input
            class="input roomForm__input"
            id="roomMessage"
            name="message"
            placeholder="Message…"
            data-i18n-placeholder="room_message_placeholder"
            minlength="1"
            maxlength="400"
          />
          <input class="sr-only" type="file" id="roomPhoto" accept="image/*" />
          <button class="btn btn--ghost" type="button" id="roomPhotoBtn">
            <span data-i18n="room_photo">Photo</span>
          </button>
          <button class="btn btn--ghost" type="button" id="roomLocBtn">
            <span data-i18n="room_location">Location</span>
          </button>
          <button class="btn btn--primary" type="submit" id="roomSend">
            <span data-i18n="room_send">Send</span>
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
